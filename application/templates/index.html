{% extends "base.html" %}
{% block title %}SafePoint{% endblock %}
{% block body %}
<div id="map"></div>

<div id="search-bar" class="card show">
    <div id="search-panel">
        <button id="menu-button"></button>
        <input id="search" type="text" placeholder="Search SafePoint"/>
        <button id="search-button"></button>
    </div>
    <div id="autocomplete-results">
        <ul id="results"></ul>
    </div>
</div>

<div id="info-panel" class="card">
    <p>Click over a place and
        <button class="action" onclick="openAddReportModal()">Add details</button>
        or
        <button onclick="cancelReport()">Close</button>
    </p>
</div>

<div id="scrim"></div>
<div id="sidebar">
    <h1 class="title"><span class="highlight">Safe</span>Point</h1>

    <ul id="map-type">
        <li><span class="icon icon-earth"></span>Earth</li>
        <li><span class="icon icon-heatmap"></span>Heat map</li>
        <li class="enabled"><span class="icon icon-traffic"></span>Traffic</li>
        <li><span class="icon icon-terrain"></span>Terrain</li>
    </ul>
    <ul id="reports-categories">
        {% for category in categories %}
        <li data-id="{{ category.id }}"><span class="icon icon-{{ category.name.lower() }}"></span>{{ category.name }}
        </li>
        {% endfor %}
    </ul>

    <ul id="wms-layers"></ul>
    <ul>
        <li id="add-report-button"><span class="icon icon-plus"></span>Add a new report</li>
    </ul>
</div>

<div id="add-report-modal" class="card">
    <h2>Add a report</h2>

    <p>Address:</p>
    <input id="address" type="text" name="address" autofocus="true"/>
    Category:
    <select>
        {% for category in categories %}
        <option value="{{ category.name.lower() }}">{{ category.name }}</option>
        {% endfor %}
    </select>

    <p>Description:</p>
    <textarea name="description"></textarea>
    <button type="submit" class="action">Create</button>
</div>

{% endblock body %}
{% block js %}
<script async defer
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_CGL5KrEXMedgQ7-nYtEzZ_Z7oLg5gQ4&libraries=places,visualization&callback=initMap">
</script>
<script src="{{ url_for('static', filename='js/actions.js') }}"></script>
<script src="{{ url_for('static', filename='js/wms.js') }}"></script>
{% endblock js %}
